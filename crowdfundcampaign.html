<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crowdfunding Campaigns</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
      color: #fff;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 20px;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.6);
      letter-spacing: 2px;
    }
    .btn {
      padding: 12px 24px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      border-radius: 10px;
      transition: all 0.3s ease-in-out;
    }
    .btn-create {
      background: linear-gradient(90deg, #06b6d4, #3b82f6);
      color: #fff;
      display: block;
      margin: 20px auto;
      font-size: 1.1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .btn-create:hover {
      transform: scale(1.05);
      background: linear-gradient(90deg, #3b82f6, #06b6d4);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 25px;
      padding: 10px;
    }
    .card {
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 6px 20px rgba(0,0,0,0.6);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.8);
    }
    .card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .card-content {
      padding: 18px;
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .card-header h2 {
      font-size: 1.3rem;
      margin: 0;
    }
    .btn-donate {
      background: linear-gradient(90deg, #22c55e, #16a34a);
      color: #fff;
      width: 100%;
      margin-top: 12px;
      font-size: 1rem;
    }
    .btn-donate:hover {
      background: linear-gradient(90deg, #16a34a, #22c55e);
      transform: scale(1.03);
    }
    .btn-delete {
      background: linear-gradient(90deg, #ef4444, #dc2626);
      color: #fff;
      width: 100%;
      margin-top: 10px;
    }
    .btn-delete:hover {
      background: linear-gradient(90deg, #dc2626, #ef4444);
      transform: scale(1.03);
    }
    .arrow-btn {
      background: linear-gradient(90deg, #06b6d4, #3b82f6);
      border: none;
      color: #fff;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background 0.3s, transform 0.2s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    .arrow-btn:hover {
      background: linear-gradient(90deg, #3b82f6, #06b6d4);
      transform: scale(1.15);
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background: #fff;
      color: #000;
      padding: 25px;
      border-radius: 16px;
      text-align: center;
      width: 350px;
      animation: fadeIn 0.3s ease-in-out;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
    }
    @keyframes fadeIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .modal-content img {
      width: 220px;
      margin: 10px auto;
    }
    .close-btn {
      background: #ef4444;
      color: #fff;
      margin-top: 15px;
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <h1>CROWDFUNDING CAMPAIGNS</h1>
  <button class="btn btn-create" onclick="openModal('createModal')">CREATE CAMPAIGN</button>

  <div id="campaignsGrid" class="grid">
    <!-- Default Campaigns -->
    <div class="card">
      <img src="comm_plantationdrive.jpg" alt="Community Plantation">
      <div class="card-content">
        <div class="card-header">
          <h2>Community Plantation Drives</h2>
          <button class="arrow-btn" onclick="window.location.href='more_to_plantation.html'">➜</button>
        </div>
        <p>This is a campaign to bring together local residents, volunteers, and donors to plant and maintain trees in urban and rural areas. The goal is not just planting saplings, but ensuring their survival through community care.</p>
        <button class="btn btn-donate" onclick="openQRModal('workingqr1_j.jpeg')">DONATE</button>
      </div>
    </div>

    <div class="card">
      <img src="lib.png" alt="Community Library">
      <div class="card-content">
        <div class="card-header">
          <h2>Community Library</h2>
          <button class="arrow-btn" onclick="window.location.href='more_to_library.html'">➜</button>
        </div>
        <p>It aims to create an accessible learning space where children, women, and youth can read, learn, and grow together. It provides books, digital resources, and a safe study environment for communities with limited access to educational materials.</p>
        <button class="btn btn-donate" onclick="openQRModal('workingqr2_k.jpeg')">DONATE</button>
      </div>
    </div>
  </div>

  <!-- QR Code Modal -->
  <div id="qrModal" class="modal">
    <div class="modal-content">
      <h2>Scan to Donate</h2>
      <img id="qrImage" src="sample_qr_1.png" alt="QR Code">
      <button class="btn close-btn" onclick="closeModal('qrModal')">Close</button>
    </div>
  </div>

  <!-- Create Campaign Modal -->
  <div id="createModal" class="modal">
    <div class="modal-content">
      <h2>Create a New Campaign</h2>
      <input type="text" id="campaignTitle" placeholder="Campaign Title">
      <textarea id="campaignDesc" placeholder="Campaign Description"></textarea>
      <input type="file" id="campaignImage" accept="image/*">
      <input type="file" id="qrUpload" accept="image/*">
      <button class="btn btn-create" onclick="addCampaign()">Submit Campaign</button>
      <button class="btn close-btn" onclick="closeModal('createModal')">Cancel</button>
    </div>
  </div>

  <script>
    function openModal(id) {
      document.getElementById(id).style.display = 'flex';
    }
    function closeModal(id) {
      document.getElementById(id).style.display = 'none';
    }

    function openQRModal(qrSrc) {
      document.getElementById("qrImage").src = qrSrc;
      openModal("qrModal");
    }

    function saveCampaigns(campaigns) {
      localStorage.setItem("campaigns", JSON.stringify(campaigns));
    }

    function loadCampaigns() {
      const data = localStorage.getItem("campaigns");
      return data ? JSON.parse(data) : [];
    }

    function displayCampaigns() {
      const campaignsGrid = document.getElementById("campaignsGrid");
      campaignsGrid.querySelectorAll(".dynamic-card").forEach(el => el.remove());

      const campaigns = loadCampaigns();
      campaigns.forEach((c, i) => {
        const card = document.createElement("div");
        card.classList.add("card", "dynamic-card");
        card.innerHTML = `
          <img src="${c.img}" alt="${c.title}">
          <div class="card-content">
            <div class="card-header">
              <h2>${c.title}</h2>
              <button class="arrow-btn" onclick="window.location.href='arrow_button.html'">➜</button>
            </div>
            <p>${c.desc}</p>
            <button class="btn btn-donate" onclick="openQRModal('${c.qr}')">DONATE</button>
            <button class="btn btn-delete" onclick="deleteCampaign(${i})">DELETE</button>
          </div>
        `;
        campaignsGrid.appendChild(card);
      });
    }

    function addCampaign() {
      const title = document.getElementById("campaignTitle").value;
      const desc = document.getElementById("campaignDesc").value;
      const imageFile = document.getElementById("campaignImage").files[0];
      const qrFile = document.getElementById("qrUpload").files[0];

      if (!title || !desc || !imageFile || !qrFile) {
        alert("Please fill in all fields and upload images.");
        return;
      }

      const readerImage = new FileReader();
      const readerQR = new FileReader();

      readerImage.onload = function(e) {
        const imgSrc = e.target.result;
        readerQR.onload = function(e2) {
          const qrSrc = e2.target.result;

          const campaigns = loadCampaigns();
          campaigns.push({ title, desc, img: imgSrc, qr: qrSrc });
          saveCampaigns(campaigns);
          displayCampaigns();
        };
        readerQR.readAsDataURL(qrFile);
      };
      readerImage.readAsDataURL(imageFile);

      closeModal("createModal");
      document.getElementById("campaignTitle").value = "";
      document.getElementById("campaignDesc").value = "";
      document.getElementById("campaignImage").value = "";
      document.getElementById("qrUpload").value = "";
    }

    function deleteCampaign(index) {
      const campaigns = loadCampaigns();
      campaigns.splice(index, 1);
      saveCampaigns(campaigns);
      displayCampaigns();
    }

    window.onload = displayCampaigns;
  </script>
</body>
</html>
