<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Smart Expense Tracker</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Didact+Gothic&display=swap');

    #budget-section h3 {
  color: white;
}

    body {
      margin: 0;
      font-family: 'Didact Gothic', sans-serif;
      background-color: #000;
      color: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    header {
      background-color: #d6f7f7;
      width: 90vw;
      max-width: 900px;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      border-radius: 5px;
    }

    header h1 {
      font-family: 'Didact Gothic', sans-serif;
      font-weight: 400;
      font-size: 2rem;
      letter-spacing: 3px;
      margin: 0;
    }

    header img {
      width: 40px;
      height: 40px;
      object-fit: contain;
    }

    main {
      background-color: #90e0d9;
      width: 90vw;
      max-width: 900px;
      display: grid;
      grid-template-columns: 1fr 1.2fr;
      gap: 20px;
      padding: 20px;
      border-radius: 5px;
      box-sizing: border-box;
    }

    section {
      background-color: #ccfffc;
      border-radius: 5px;
      padding: 15px;
      box-sizing: border-box;
    }

    #add-expense {
      background-color: #b2e8e1;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 15px;
    }

    #add-expense label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
    }

    #add-expense input[type="text"],
    #add-expense input[type="number"],
    #add-expense input[type="date"],
    #add-expense select {
      width: 100%;
      padding: 7px 10px;
      margin-bottom: 15px;
      border: none;
      border-radius: 5px;
      background-color: #d3d3d3;
      font-size: 1rem;
      box-sizing: border-box;
    }

    #add-expense button {
      width: 100%;
      padding: 10px;
      background-color: #ea93ff;
      border: none;
      border-radius: 5px;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #add-expense button:hover {
      background-color: #c168cc;
    }

    #daily-expenses {
      background-color: #d5f4f0;
      padding: 15px;
      border-radius: 5px;
      height: 300px;
      overflow-y: auto;
      box-sizing: border-box;
    }

    #daily-expenses-title {
      text-align: center;
      margin-bottom: 10px;
      font-weight: 600;
      user-select: none;
    }

    .expense-item {
      background: white;
      margin-bottom: 8px;
      padding: 8px 10px;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 0 3px rgba(0,0,0,0.1);
    }

    .expense-info {
      flex-grow: 1;
      font-weight: 500;
      font-size: 0.9rem;
      user-select: none;
      overflow-wrap: anywhere;
    }

    .expense-actions button {
      margin-left: 8px;
      background: #ea93ff;
      border: none;
      padding: 5px 8px;
      border-radius: 4px;
      cursor: pointer;
      color: white;
      font-weight: 600;
      font-size: 0.8rem;
      transition: background-color 0.3s ease;
    }

    .expense-actions button:hover {
      background-color: #c168cc;
    }

    /* Modal styles */
    #modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    #modal-content {
      background-color: #d5f4f0;
      padding: 20px;
      border-radius: 8px;
      width: 320px;
      box-sizing: border-box;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }

    #modal-content label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
    }

    #modal-content input[type="text"],
    #modal-content input[type="number"],
    #modal-content input[type="date"],
    #modal-content select {
      width: 100%;
      padding: 7px 10px;
      margin-bottom: 15px;
      border: none;
      border-radius: 5px;
      background-color: #d3d3d3;
      font-size: 1rem;
      box-sizing: border-box;
    }

    #modal-buttons {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    #modal-buttons button {
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
    }

    #modal-save {
      background-color: #5aab61;
      color: white;
      transition: background-color 0.3s ease;
    }

    #modal-save:hover {
      background-color: #3f7f3e;
    }

    #modal-cancel {
      background-color: #ea93ff;
      color: white;
      transition: background-color 0.3s ease;
    }

    #modal-cancel:hover {
      background-color: #c168cc;
    }

    /* Summary section */
    #currency-summary {
      margin-top: 15px;
      padding: 10px;
      background: #b2e8e1;
      border-radius: 6px;
      font-weight: 600;
      font-size: 1rem;
      line-height: 1.6;
      text-align: center;
    }
  

  /* Budget Section Buttons */
  #budget-section button {
    padding: 10px 18px;
    border: none;
    border-radius: 25px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.15);
  }

  /* Save button (Monthly/Weekly limit) */
  #budget-section button:nth-of-type(1) {
    background: linear-gradient(135deg, #6dd5ed, #2193b0);
    color: white;
  }
  #budget-section button:nth-of-type(1):hover {
    background: linear-gradient(135deg, #2193b0, #6dd5ed);
    transform: scale(1.05);
  }

  /* Summary button */
  #budget-section div button {
    background: linear-gradient(135deg, #ff9966, #ff5e62);
    color: white;
  }
  #budget-section div button:hover {
    background: linear-gradient(135deg, #ff5e62, #ff9966);
    transform: scale(1.05);
  }


/* Modernized select dropdown */
#add-expense select,
#modal-content select,
#budget-section select {
  width: 100%;
  padding: 10px 12px;
  border: none;
  border-radius: 8px;
  background: linear-gradient(135deg, #fdfbfb, #ebedee);
  font-size: 1rem;
  font-weight: 500;
  color: #333;
  appearance: none;
  cursor: pointer;
  box-shadow: 0 3px 6px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

/* Hover and focus effects */
#add-expense select:hover,
#modal-content select:hover,
#budget-section select:hover,
#add-expense select:focus,
#modal-content select:focus,
#budget-section select:focus {
  background: linear-gradient(135deg, #dfe9f3, #ffffff);
  outline: none;
  transform: scale(1.02);
}

/* Option styling */
#add-expense select option,
#modal-content select option,
#budget-section select option {
  padding: 10px;
  font-size: 1rem;
  background: #fff;
  color: #333;
}


/* Monthly & Weekly Limit Inputs */
#budget-section input[type="number"] {
  width: 100%;
  max-width: 250px;
  padding: 10px 14px;
  margin: 8px 0;
  border: none;
  border-radius: 10px;
  background: linear-gradient(135deg, #ffffff, #f2f2f2);
  font-size: 1rem;
  font-weight: 500;
  color: #333;
  box-shadow: 0 3px 6px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

/* Hover & Focus */
#budget-section input[type="number"]:hover,
#budget-section input[type="number"]:focus {
  background: linear-gradient(135deg, #dfe9f3, #ffffff);
  outline: none;
  transform: scale(1.02);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}
</style>
</head>
<body>
<header>
<h1>SMART EXPENSE TRACKER</h1>
<img alt="expense icon" src="https://cdn-icons-png.flaticon.com/512/2838/2838912.png"/>
</header>
<main>
<section>
<div id="add-expense">
<label for="expense-name">Expense Name:</label>
<input id="expense-name" placeholder="e.g., Food" type="text"/>
<label for="expense-amount">Amount:</label>
<input id="expense-amount" min="0" placeholder="e.g., 25" step="0.01" type="number"/>
<label for="expense-category">Category:</label>
<select id="expense-category">
<option value="Food">Food</option>
<option value="Transport">Transport</option>
<option value="Entertainment">Entertainment</option>
<option value="Bills">Bills</option>
<option value="Other">Other</option>
</select>
<label for="expense-date">Date:</label>
<input id="expense-date" type="date"/>
<label for="currency">Currency:</label>
<select id="currency">
<option selected="" value="USD">USD ($)</option>
<option value="EUR">EUR (€)</option>
<option value="GBP">GBP (£)</option>
<option value="INR">INR (₹)</option>
<option value="JPY">JPY (¥)</option>
</select>
<button id="add-expense-btn">ADD EXPENSE</button>
</div>
<div id="daily-expenses">
<div id="daily-expenses-title">DAILY EXPENSES:</div>
<div id="expenses-list"></div>
</div>
</section>
<section id="chart-container">
<div id="chart-title">Expense Distribution</div>
<canvas id="expense-chart"></canvas>
<div id="currency-summary">No expenses yet.</div>
</section>
</main>
<!-- Edit Modal -->
<div id="modal">
<div id="modal-content">
<h3>Edit Expense</h3>
<label for="edit-expense-name">Expense Name:</label>
<input id="edit-expense-name" type="text"/>
<label for="edit-expense-amount">Amount:</label>
<input id="edit-expense-amount" min="0" step="0.01" type="number"/>
<label for="edit-expense-category">Category:</label>
<select id="edit-expense-category">
<option value="Food">Food</option>
<option value="Transport">Transport</option>
<option value="Entertainment">Entertainment</option>
<option value="Bills">Bills</option>
<option value="Other">Other</option>
</select>
<label for="edit-expense-date">Date:</label>
<input id="edit-expense-date" type="date"/>
<label for="edit-currency">Currency:</label>
<select id="edit-currency">
<option value="USD">USD ($)</option>
<option value="EUR">EUR (€)</option>
<option value="GBP">GBP (£)</option>
<option value="INR">INR (₹)</option>
<option value="JPY">JPY (¥)</option>
</select>
<div id="modal-buttons">
<button id="modal-save">Save</button>
<button id="modal-cancel">Cancel</button>
</div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const expenseNameInput = document.getElementById('expense-name');
  const expenseAmountInput = document.getElementById('expense-amount');
  const expenseCategoryInput = document.getElementById('expense-category');
  const expenseDateInput = document.getElementById('expense-date');
  const currencyInput = document.getElementById('currency');
  const addExpenseBtn = document.getElementById('add-expense-btn');
  const expensesList = document.getElementById('expenses-list');

  // Modal elements
  const modal = document.getElementById('modal');
  const editNameInput = document.getElementById('edit-expense-name');
  const editAmountInput = document.getElementById('edit-expense-amount');
  const editCategoryInput = document.getElementById('edit-expense-category');
  const editDateInput = document.getElementById('edit-expense-date');
  const editCurrencyInput = document.getElementById('edit-currency');
  const modalSaveBtn = document.getElementById('modal-save');
  const modalCancelBtn = document.getElementById('modal-cancel');

  const categories = ['Food', 'Transport', 'Entertainment', 'Bills', 'Other'];
  let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
  let currentEditId = null;

  // Initialize chart
  const ctx = document.getElementById('expense-chart').getContext('2d');
  const expenseChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: categories,
      datasets: [{
        label: 'Expenses',
        data: [0, 0, 0, 0, 0],
        backgroundColor: ['#ff6384', '#3a9bdc', '#f3ca74', '#6bc5b6', '#8a72e6'],
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'bottom' }
      }
    }
  });

  function updateExpensesDisplay() {
    expensesList.innerHTML = '';
    if (expenses.length === 0) {
      expensesList.textContent = '.\n.\n.\n.\n.';
      return;
    }

    expenses.forEach(expense => {
      const div = document.createElement('div');
      div.classList.add('expense-item');

      const infoDiv = document.createElement('div');
      infoDiv.classList.add('expense-info');
      infoDiv.textContent = `${expense.date} - ${expense.name} (${expense.category}): ${getCurrencySymbol(expense.currency)}${expense.amount.toFixed(2)}`;

      const actionsDiv = document.createElement('div');
      actionsDiv.classList.add('expense-actions');

      const editBtn = document.createElement('button');
      editBtn.textContent = 'Edit';
      editBtn.addEventListener('click', () => openEditModal(expense.id));

      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = 'Delete';
      deleteBtn.addEventListener('click', () => deleteExpense(expense.id));

      actionsDiv.appendChild(editBtn);
      actionsDiv.appendChild(deleteBtn);

      div.appendChild(infoDiv);
      div.appendChild(actionsDiv);

      expensesList.appendChild(div);
    });
  }

  function updateChart() {
    const sums = { Food: 0, Transport: 0, Entertainment: 0, Bills: 0, Other: 0 };
    for (const expense of expenses) {
      sums[expense.category] += expense.amount;
    }
    expenseChart.data.datasets[0].data = categories.map(cat => sums[cat]);
    expenseChart.update();
  }

  function updateSummary() {
    const totals = {};
    for (const expense of expenses) {
      if (!totals[expense.currency]) totals[expense.currency] = 0;
      totals[expense.currency] += expense.amount;
    }
    const summaryDiv = document.getElementById('currency-summary');
    if (Object.keys(totals).length === 0) {
      summaryDiv.textContent = "No expenses yet.";
      return;
    }
    summaryDiv.innerHTML = Object.entries(totals)
      .map(([currency, total]) => `${currency} ${getCurrencySymbol(currency)}${total.toFixed(2)}`)
      .join(" | ");
  }

  function addExpense() {
    const name = expenseNameInput.value.trim();
    const amount = parseFloat(expenseAmountInput.value);
    const category = expenseCategoryInput.value;
    const date = expenseDateInput.value || new Date().toISOString().slice(0, 10);
    const currency = currencyInput.value;

    if (!name || isNaN(amount) || amount <= 0) {
      alert('Please enter valid details.');
      return;
    }

    const id = Date.now();
    expenses.push({ id, name, amount, category, date, currency });
    saveExpenses();
    updateExpensesDisplay();
    updateChart();
    updateSummary();

    expenseNameInput.value = '';
    expenseAmountInput.value = '';
    expenseCategoryInput.value = 'Food';
    expenseDateInput.value = '';
  }

  function openEditModal(id) {
    currentEditId = id;
    const expense = expenses.find(e => e.id === id);
    if (!expense) return;

    editNameInput.value = expense.name;
    editAmountInput.value = expense.amount;
    editCategoryInput.value = expense.category;
    editDateInput.value = expense.date;
    editCurrencyInput.value = expense.currency;
    modal.style.display = 'flex';
  }

  function closeModal() {
    modal.style.display = 'none';
    currentEditId = null;
  }

  function saveEdit() {
    const name = editNameInput.value.trim();
    const amount = parseFloat(editAmountInput.value);
    const category = editCategoryInput.value;
    const date = editDateInput.value || new Date().toISOString().slice(0, 10);
    const currency = editCurrencyInput.value;

    if (!name || isNaN(amount) || amount <= 0) {
      alert('Please enter valid details.');
      return;
    }

    const index = expenses.findIndex(e => e.id === currentEditId);
    if (index === -1) return;

    expenses[index] = { id: currentEditId, name, amount, category, date, currency };
    saveExpenses();
    updateExpensesDisplay();
    updateChart();
    updateSummary();
    closeModal();
  }

  function deleteExpense(id) {
    if (!confirm('Delete this expense?')) return;
    expenses = expenses.filter(e => e.id !== id);
    saveExpenses();
    updateExpensesDisplay();
    updateChart();
    updateSummary();
  }

  function saveExpenses() {
    localStorage.setItem('expenses', JSON.stringify(expenses));
  }

  function getCurrencySymbol(currency) {
    const symbols = { USD: '$', EUR: '€', GBP: '£', INR: '₹', JPY: '¥' };
    return symbols[currency] || currency + ' ';
  }

  addExpenseBtn.addEventListener('click', addExpense);
  modalSaveBtn.addEventListener('click', saveEdit);
  modalCancelBtn.addEventListener('click', closeModal);
  modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

  updateExpensesDisplay();
  updateChart();
  updateSummary();


 function saveLimits() {
  const monthlyLimit = parseFloat(document.getElementById("monthlyLimit").value) || 0;
  const weeklyLimit = parseFloat(document.getElementById("weeklyLimit").value) || 0;

  localStorage.setItem("monthlyLimit", monthlyLimit);
  localStorage.setItem("weeklyLimit", weeklyLimit);

  updateLimitDisplay();
  alert("Limits saved!");
}

function loadLimits() {
  const monthlyLimit = parseFloat(localStorage.getItem("monthlyLimit")) || 0;
  const weeklyLimit = parseFloat(localStorage.getItem("weeklyLimit")) || 0;

  document.getElementById("monthlyLimitDisplay").textContent = monthlyLimit;
  document.getElementById("weeklyLimitDisplay").textContent = weeklyLimit;
}

function updateLimitDisplay() {
  loadLimits();

  // Example: calculate totals
  const monthlySpent = expenses.reduce((sum, e) => sum + e.amount, 0);
  const weeklySpent = expenses.reduce((sum, e) => sum + e.amount, 0); // Replace with real weekly logic

  document.getElementById("monthlySpent").textContent = monthlySpent.toFixed(2);
  document.getElementById("weeklySpent").textContent = weeklySpent.toFixed(2);

  const monthlyLimit = parseFloat(localStorage.getItem("monthlyLimit")) || 0;
  const weeklyLimit = parseFloat(localStorage.getItem("weeklyLimit")) || 0;

  const warning = document.getElementById("warningMsg");
  if (monthlyLimit && monthlySpent > monthlyLimit) {
    warning.textContent = "⚠️ Monthly limit exceeded!";
  } else if (weeklyLimit && weeklySpent > weeklyLimit) {
    warning.textContent = "⚠️ Weekly limit exceeded!";
  } else {
    warning.textContent = "";
  }
}

// Run on page load
loadLimits();
updateLimitDisplay();
 
</script>
<div id="budget-section">
<h3>Set Spending Limits</h3>
<input id="monthlyLimit" placeholder="Monthly Limit" type="number"/>
<input id="weeklyLimit" placeholder="Weekly Limit" type="number"/>
<button onclick="saveLimits()">SAVE</button>
<div id="budget-summary">
    Monthly Spent: <span id="monthlySpent">0</span> / Limit: <span id="monthlyLimitDisplay">0</span><br/>
    Weekly Spent: <span id="weeklySpent">0</span> / Limit: <span id="weeklyLimitDisplay">0</span><br/>
<span class="warning" id="warningMsg"></span>
</div>
<!-- New navigation button -->
<div style="margin-top: 15px; text-align:center;">
<button onclick="window.location.href='expensesummary.html'">View Summary</button>
</div>
</div>
</body>
</html>